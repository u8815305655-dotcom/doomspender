<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Munka√≥ra (standalone)</title>
  <style>
    :root { --accent:#00B3A4; --accent2:#FFD166; --bg:#ffffff; --text:#111827; --muted:#6b7280; }
    *{box-sizing:border-box} html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font:16px/1.45 -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Inter,Helvetica,Arial}
    .wrap{max-width:420px;margin:0 auto;padding:16px 16px 96px}
    .header{position:sticky;top:0;background:rgba(255,255,255,.7);backdrop-filter:blur(6px);padding:12px 16px;margin:0 -16px 0;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #f3f4f6}
    .btn{display:inline-block;width:100%;padding:14px 16px;border-radius:9999px;border:none;cursor:pointer;font-weight:600;color:#fff;background:var(--accent);}
    .btn.yellow{background:var(--accent2);color:#111}
    .btn.green{background:#16a34a}.btn.red{background:#dc2626}
    .pill{padding:8px 12px;border-radius:999px;background:#f3f4f6;border:none;cursor:pointer}
    .title{font-size:28px;font-weight:700;margin:0 0 12px}
    .muted{color:var(--muted)}
    .input{width:100%;padding:12px 14px;border-radius:12px;border:none;background:#f3f4f6;margin-top:6px}
    .section{padding-top:24px}
    .card{background:#fff;border-radius:16px;padding:16px;box-shadow:0 10px 30px rgba(0,0,0,.06)}
    .hidden{display:none}
    ul{list-style:none;margin:0;padding:0}
    li{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #f1f5f9}
    .red{color:#dc2626}.green{color:#16a34a}
  </style>
</head>
<body>
  <div class="wrap">

    <div class="header">
      <strong>Munka√≥ra</strong>
      <div>
        <button id="navCalc" class="pill">Sz√°mol√≥</button>
        <button id="navResults" class="pill">Eredm√©nyek</button>
      </div>
    </div>

    <section id="screen-welcome" class="section">
      <h2 class="title">Tudd, h√°ny √≥r√°t dolgozol a v√°gyaid√©rt üí∏</h2>
      <p class="muted">Adj meg p√°r alapadatot, √©s kontextusba tessz√ºk a k√∂vetkez≈ë v√°s√°rl√°sod.</p>
      <div style="margin-top:16px"><button id="startBtn" class="btn">Kezdj√ºk</button></div>
    </section>

    <section id="screen-profile" class="section hidden">
      <h2 class="title">Nett√≥ b√©red √©s munkaid≈ëd</h2>
      <label>Nett√≥ havi fizet√©s (Ft)
        <input id="nettober" type="number" inputmode="numeric" class="input" placeholder="Add meg a nett√≥ fizet√©sed">
      </label>
      <div style="height:12px"></div>
      <label>Heti munka√≥r√°k
        <input id="hetiOrak" type="number" inputmode="numeric" class="input" placeholder="Heti h√°ny √≥r√°t dolgozol">
      </label>
      <div style="height:14px"></div>
      <button id="saveProfile" class="btn">Ment√©s</button>
      <p class="muted" style="font-size:14px;margin-top:8px">Ezt csak egyszer kell megadnod. K√©s≈ëbb b√°rmikor m√≥dos√≠thatod.</p>
    </section>

    <section id="screen-calc" class="section hidden">
      <h2 class="title">Mit szeretn√©l venni?</h2>
      <label>Term√©k neve
        <input id="termekNev" type="text" class="input" placeholder="Pl. iPhone 15">
      </label>
      <div style="height:12px"></div>
      <label>Term√©k √°ra (Ft)
        <input id="termekAr" type="number" inputmode="numeric" class="input" placeholder="Pl. 299000">
      </label>
      <div style="height:12px"></div>
      <button id="calcBtn" class="btn yellow">Kisz√°molom</button>

      <div id="calcResultBox" class="card hidden" style="margin-top:16px">
        <p id="calcResultText" style="font-weight:700;font-size:18px"></p>
        <p id="calcSub" class="muted" style="margin-top:6px"></p>
        <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px">
          <button id="saveMoneyBtn" class="btn green">Megsp√≥rolom</button>
          <button id="buyBtn" class="btn red">Megveszem</button>
        </div>
      </div>
    </section>

    <section id="screen-results" class="section hidden">
      <h2 class="title">Eredm√©nyek</h2>
      <div class="card">
        <ul id="resultsList"></ul>
        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:12px">
          <button id="clearItems" class="pill">Lista t√∂rl√©se</button>
          <button id="backToCalc" class="pill">Vissza a sz√°mol√≥hoz</button>
        </div>
      </div>
    </section>

  </div>

  <script>
    const fmtFt = v => new Intl.NumberFormat('hu-HU',{style:'currency',currency:'HUF',maximumFractionDigits:0}).format(Number(v||0));
    const qs = sel => document.querySelector(sel);
    const show = id => { ['welcome','profile','calc','results'].forEach(s=>qs('#screen-'+s).classList.add('hidden')); qs('#screen-'+id).classList.remove('hidden'); }
    const loadProfile = () => JSON.parse(localStorage.getItem('munkaora_profile')||'{}');
    const saveProfileLS = p => localStorage.setItem('munkaora_profile', JSON.stringify(p));
    const loadItems = () => JSON.parse(localStorage.getItem('munkaora_items')||'[]');
    const saveItems = arr => localStorage.setItem('munkaora_items', JSON.stringify(arr));

    document.addEventListener('DOMContentLoaded', () => {
      qs('#navCalc').addEventListener('click', ()=>show('calc'));
      qs('#navResults').addEventListener('click', ()=>{ renderList(); show('results'); });
      qs('#startBtn').addEventListener('click', ()=>{ const p = loadProfile(); (!p.net||!p.weekly)?show('profile'):show('calc'); });
      qs('#saveProfile').addEventListener('click', ()=>{
        const net = Number(qs('#nettober').value);
        const weekly = Number(qs('#hetiOrak').value);
        if(!net||!weekly){ alert('K√©rlek t√∂ltsd ki a nett√≥ b√©rt √©s a heti √≥rasz√°mot.'); return; }
        saveProfileLS({ net, weekly }); alert('Profil elmentve.'); show('calc');
      });
      qs('#calcBtn').addEventListener('click', ()=>{
        const name = qs('#termekNev').value.trim();
        const price = Number(qs('#termekAr').value);
        const p = loadProfile();
        if(!name||!price){ alert('Add meg a term√©k nev√©t √©s √°r√°t.'); return; }
        if(!p.net||!p.weekly){ alert('El≈ëbb add meg a profil adataidat.'); show('profile'); return; }
        const hourly = p.net / (p.weekly * 4);
        const hours = price / hourly;
        const days = hours / 8;
        qs('#calcResultText').textContent = `${Math.ceil(hours)} munka√≥ra (~${days.toFixed(1)} nap)`;
        qs('#calcSub').textContent = `${name} √°ra: ${fmtFt(price)} | √ìrab√©red ~ ${fmtFt(hourly)}`;
        qs('#calcResultBox').classList.remove('hidden');
        qs('#saveMoneyBtn').onclick = () => addItem({ name, price, type:'saved' });
        qs('#buyBtn').onclick = () => addItem({ name, price, type:'bought' });
      });
      qs('#clearItems').addEventListener('click', ()=>{ if(confirm('Biztos t√∂rl√∂d a list√°t?')){ saveItems([]); renderList(); } });
      qs('#backToCalc').addEventListener('click', ()=>show('calc'));
      const p = loadProfile(); if(p.net) qs('#nettober').value = p.net; if(p.weekly) qs('#hetiOrak').value = p.weekly;
      show('welcome');
    });

    function addItem(item){ const items = loadItems(); items.unshift({ ...item, id: Date.now() }); saveItems(items); renderList(); show('results'); }
    function renderList(){
      const list = qs('#resultsList'); const items = loadItems(); list.innerHTML='';
      if(items.length===0){ list.innerHTML='<li class="muted" style="text-align:center;padding:24px 0">M√©g nincs elem a list√°ban.</li>'; return; }
      items.forEach(it=>{
        const color = it.type==='bought' ? 'red' : 'green';
        const li = document.createElement('li');
        li.innerHTML = `<span class="${color}" style="font-weight:600">${escapeHtml(it.name)}</span><span style="font-variant-numeric:tabular-nums">${fmtFt(it.price)}</span>`;
        list.appendChild(li);
      });
    }
    function escapeHtml(str){ return str.replace(/[&<>'"]/g, c=>({ '&':'&amp;','<':'&lt;','>':'&gt;',"'":'&#39;','"':'&quot;' }[c])); }
  </script>
</body>
</html>
